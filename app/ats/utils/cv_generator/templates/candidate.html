<!DOCTYPE html>
<html lang="{{ language|default:'es' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ name }} - Curriculum Vitae Personalizado</title>
    <style>
        @page {
            margin: 2cm;
            @top-right {
                content: "{{ business_unit }} - Confidencial";
                font-size: 9pt;
                color: #666;
            }
            @bottom-center {
                content: "P√°gina " counter(page) " de " counter(pages);
                font-size: 9pt;
            }
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 100%;
            margin: 0 auto;
        }
        .header {
            padding: 20px 0;
            border-bottom: 3px solid #1a73e8;
            margin-bottom: 20px;
            position: relative;
        }
        .bu-logo {
            position: absolute;
            top: 20px;
            right: 20px;
            max-width: 150px;
            max-height: 80px;
        }
        .name {
            font-size: 28px;
            font-weight: bold;
            color: #1a73e8;
            margin: 0;
        }
        .title {
            font-size: 18px;
            color: #555;
            margin: 5px 0 15px;
        }
        .contact-info {
            margin-bottom: 15px;
        }
        .contact-info p {
            margin: 5px 0;
        }
        .section {
            margin-bottom: 25px;
        }
        .section-title {
            font-size: 20px;
            color: #1a73e8;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            margin-bottom: 15px;
        }
        .summary {
            background-color: #f7f9fc;
            padding: 15px;
            border-left: 4px solid #1a73e8;
            margin-bottom: 20px;
        }
        .experience-item, .education-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #eee;
        }
        .experience-header, .education-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        .company, .institution {
            font-weight: bold;
            color: #444;
        }
        .position, .degree {
            font-style: italic;
            color: #555;
        }
        .dates {
            color: #666;
        }
        .description {
            margin-top: 5px;
        }
        .skills-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        .skill {
            background: #e6f7ff;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 14px;
            color: #0366d6;
            display: inline-flex;
            align-items: center;
        }
        .skill-level {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #0366d6;
            border-radius: 50%;
            margin-right: 5px;
        }
        .language-item {
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }
        .language-name {
            font-weight: 500;
        }
        .language-level {
            color: #555;
        }
        .message-box {
            background-color: #e8f0fe;
            border-left: 4px solid #4285f4;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 4px 4px 0;
        }
        .motivation-message {
            font-style: italic;
            color: #444;
            line-height: 1.5;
            text-align: center;
            margin: 25px 0;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 5px;
            border-top: 2px dashed #1a73e8;
            border-bottom: 2px dashed #1a73e8;
        }
        .career-analysis {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin-top: 30px;
        }
        .career-analysis h3 {
            color: #1a73e8;
            margin-top: 0;
        }
        .potential-score {
            font-size: 48px;
            font-weight: bold;
            color: #1a73e8;
            text-align: center;
            margin: 15px 0;
        }
        .strength-item, .growth-item {
            padding: 8px 12px;
            margin-bottom: 8px;
            border-radius: 4px;
        }
        .strength-item {
            background-color: #e6f4ea;
            color: #137333;
        }
        .growth-item {
            background-color: #fce8e6;
            color: #c5221f;
        }
        .development-plan {
            background-color: #fff;
            border: 1px solid #dadce0;
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        .development-plan h3 {
            color: #1a73e8;
            margin-top: 0;
            border-bottom: 1px solid #dadce0;
            padding-bottom: 10px;
        }
        .next-position {
            font-size: 18px;
            color: #1a73e8;
            margin: 15px 0;
            padding: 10px;
            background: #e8f0fe;
            border-radius: 4px;
            text-align: center;
        }
        .timeline {
            position: relative;
            margin: 20px 0;
            padding-left: 30px;
        }
        .timeline:before {
            content: '';
            position: absolute;
            top: 0;
            left: 10px;
            height: 100%;
            width: 2px;
            background: #dadce0;
        }
        .timeline-item {
            position: relative;
            padding-bottom: 20px;
        }
        .timeline-item:before {
            content: '';
            position: absolute;
            top: 0;
            left: -30px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #1a73e8;
            border: 2px solid #fff;
        }
        .timeline-date {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .skill-gap {
            margin: 15px 0;
        }
        .progress-container {
            height: 12px;
            background-color: #e8eaed;
            border-radius: 10px;
            margin: 5px 0;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background-color: #1a73e8;
            border-radius: 10px;
        }
        .progress-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #5f6368;
        }
        .verification-seal {
            text-align: center;
            margin: 20px 0;
            padding: 10px;
            border: 1px dashed #dadce0;
            border-radius: 4px;
        }
        .verification-seal img {
            max-width: 100px;
            margin-bottom: 10px;
        }
        .footer {
            margin-top: 40px;
            text-align: center;
            font-size: 12px;
            color: #5f6368;
            padding: 20px;
            border-top: 1px solid #dadce0;
        }
        .page-break {
            page-break-after: always;
        }
        @media print {
            body {
                font-size: 12px;
            }
            .header {
                padding: 10px 0;
            }
            .name {
                font-size: 24px;
            }
            .title {
                font-size: 16px;
            }
            .section-title {
                font-size: 18px;
            }
            .motivation-message {
                margin: 15px 0;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            {% if business_unit_logo %}
            <img src="{{ business_unit_logo }}" alt="{{ business_unit }}" class="bu-logo">
            {% endif %}
            <h1 class="name">{{ name }}</h1>
            <h2 class="title">{{ title }}</h2>
            <div class="contact-info">
                <p>üìß {{ contact_info.email }}</p>
                <p>üì± {{ contact_info.phone }}</p>
                {% if contact_info.linkedin %}
                <p>üëî <a href="{{ contact_info.linkedin }}">LinkedIn</a></p>
                {% endif %}
            </div>
        </div>

        {% if personalized_message %}
        <div class="message-box">
            <p>{{ personalized_message }}</p>
        </div>
        {% endif %}

        <div class="section">
            <h3 class="section-title">{{ translations.title }}</h3>
            <div class="summary">
                <p>{{ summary }}</p>
            </div>
        </div>

        {% if career_potential %}
        <div class="career-analysis">
            <h3>An√°lisis de Potencial</h3>
            <div class="potential-score">{{ career_potential.overall }}%</div>
            
            {% if career_potential.motivational_message %}
            <div class="motivation-message">
                {{ career_potential.motivational_message }}
            </div>
            {% endif %}
            
            <div class="strengths-growth">
                <h4>Fortalezas</h4>
                {% for strength in career_potential.strengths|slice:":3" %}
                <div class="strength-item">{{ strength }}</div>
                {% endfor %}
                
                <h4>√Åreas de Crecimiento</h4>
                {% for area in career_potential.growth_areas|slice:":3" %}
                <div class="growth-item">{{ area }}</div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <div class="section">
            <h3 class="section-title">{{ translations.experience }}</h3>
            {% for exp in experience %}
            <div class="experience-item">
                <div class="experience-header">
                    <div class="company-position">
                        <div class="company">{{ exp.company }}</div>
                        <div class="position">{{ exp.position }}</div>
                    </div>
                    <div class="dates">{{ exp.start_date }} - {{ exp.end_date|default:"Presente" }}</div>
                </div>
                <div class="description">{{ exp.description }}</div>
                {% if exp.achievements %}
                <ul>
                    {% for achievement in exp.achievements %}
                    <li>{{ achievement }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
            </div>
            {% endfor %}
        </div>

        <div class="section">
            <h3 class="section-title">{{ translations.education }}</h3>
            {% for edu in education %}
            <div class="education-item">
                <div class="education-header">
                    <div class="institution-degree">
                        <div class="institution">{{ edu.institution }}</div>
                        <div class="degree">{{ edu.degree }} en {{ edu.field_of_study }}</div>
                    </div>
                    <div class="dates">{{ edu.start_date }} - {{ edu.end_date|default:"Presente" }}</div>
                </div>
                {% if edu.description %}
                <div class="description">{{ edu.description }}</div>
                {% endif %}
                {% if edu.grade %}
                <div class="grade">{{ translations.grade }}: {{ edu.grade }}</div>
                {% endif %}
            </div>
            {% endfor %}
        </div>

        {% if skills %}
        <div class="section">
            <h3 class="section-title">{{ translations.skills }}</h3>
            <div class="skills-container">
                {% for skill in skills %}
                <div class="skill">
                    <span class="skill-level"></span>
                    {{ skill.name }}
                    {% if skill.proficiency %}
                    ({{ skill.proficiency }})
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        {% if critical_skills %}
        <div class="section">
            <h3 class="section-title">Habilidades Cr√≠ticas para tu Desarrollo</h3>
            
            {% for skill in critical_skills|slice:":5" %}
            <div class="skill-gap">
                <div class="skill-name">{{ skill.name }}</div>
                <div class="progress-container">
                    <div class="progress-bar" style="width: {{ skill.current_level }}%;"></div>
                </div>
                <div class="progress-labels">
                    <span>Nivel actual: {{ skill.current_level }}%</span>
                    <span>Objetivo: {{ skill.target_level }}%</span>
                </div>
                <div class="skill-priority">Prioridad: {{ skill.priority }}</div>
            </div>
            {% endfor %}
        </div>
        {% endif %}

        {% if languages %}
        <div class="section">
            <h3 class="section-title">{{ translations.languages }}</h3>
            {% for lang in languages %}
            <div class="language-item">
                <span class="language-name">{{ lang.language }}</span>
                <span class="language-level">{{ lang.level }}</span>
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- P√°gina 2: Plan de Desarrollo -->
        <div class="page-break"></div>
        
        {% if development_plan %}
        <div class="development-plan">
            <h3>Tu Plan de Desarrollo Profesional Personalizado</h3>
            
            <div class="next-position">
                Posici√≥n actual: <strong>{{ development_plan.next_level.current_position }}</strong><br>
                Siguiente paso: <strong>{{ development_plan.next_level.next_position }}</strong>
            </div>
            
            {% if development_plan.values_message %}
            <div class="motivation-message">
                {{ development_plan.values_message }}
            </div>
            {% endif %}
            
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-date">Ahora</div>
                    <div class="timeline-content">
                        Posici√≥n actual: {{ development_plan.next_level.current_position }}
                    </div>
                </div>
                
                {% if development_plan.critical_skills %}
                <div class="timeline-item">
                    <div class="timeline-date">{{ development_plan.development_time_months }} meses</div>
                    <div class="timeline-content">
                        <h4>Desarrollo de habilidades cr√≠ticas</h4>
                        <ul>
                            {% for skill in development_plan.critical_skills|slice:":3" %}
                            <li>{{ skill.name }} ({{ skill.growth_time_months }} meses)</li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
                {% endif %}
                
                <div class="timeline-item">
                    <div class="timeline-date">{{ development_plan.estimated_completion_date|date:"F Y" }}</div>
                    <div class="timeline-content">
                        <strong>¬°Listo para tu pr√≥ximo nivel!</strong><br>
                        Posici√≥n objetivo: {{ development_plan.next_level.next_position }}
                    </div>
                </div>
            </div>
            
            <h4>Recomendaciones para tu desarrollo</h4>
            <ul>
                {% for recommendation in development_plan.recommendations %}
                <li>{{ recommendation }}</li>
                {% endfor %}
            </ul>
            
            {% if development_plan.priority_areas %}
            <h4>√Åreas prioritarias de enfoque</h4>
            <ul>
                {% for area in development_plan.priority_areas %}
                <li>{{ area }}</li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>
        {% endif %}

        {% if verification_seal %}
        <div class="verification-seal">
            {{ verification_seal|safe }}
        </div>
        {% endif %}

        <div class="footer">
            <p>CV generado por Grupo huntRED¬Æ - {{ business_unit }} el {{ cv_creation_date|date:"d/m/Y" }}</p>
            <p>Este documento es confidencial y para uso exclusivo de {{name}} {{apellido_paterno}} {{apellido_materno}}.</p>
        </div>
    </div>
</body>
</html>
