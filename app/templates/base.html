
<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Grupo huntRED® AI - Soluciones avanzadas de inteligencia artificial para el desarrollo organizacional y gestión del talento">
    <title>{% block title %}Grupo huntRED® AI - Ecosistema de Desarrollo Organizacional y Talento{% endblock %}</title>
    
    {% load static %}
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="{% static 'img/favicon.svg' %}">
    
    <!-- Preload critical CSS -->
    <link rel="preload" href="{% static 'css/main.css' %}" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="{% static 'css/main.css' %}"></noscript>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Plus+Jakarta+Sans:wght@500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    {% block extra_css %}{% endblock %}
    
    <!-- Preload critical JS -->
    <script>
        // Load CSS asynchronously
        function loadCSS(href, before, media) {
            'use strict';
            var ss = window.document.createElement('link');
            var ref = before || window.document.getElementsByTagName('script')[0];
            ss.rel = 'stylesheet';
            ss.href = href;
            ss.media = 'only x';
            ref.parentNode.insertBefore(ss, ref);
            setTimeout(function() {
                ss.media = media || 'all';
            });
            return ss;
        }
        
        // Load non-critical CSS
        window.addEventListener('load', function() {
            loadCSS('https://unpkg.com/aos@2.3.1/dist/aos.css');
        });
    </script>
    
    <style>
        /* Custom animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-fadeInUp {
            animation: fadeInUp 0.6s ease-out forwards;
        }
        
        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
        
        /* Theme transition */
        * {
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }
    </style>
</head>
<body class="min-h-screen bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200">
    <!-- Theme Toggle Button -->
    <button id="theme-toggle" class="fixed bottom-6 right-6 z-50 p-3 rounded-full bg-white dark:bg-slate-800 shadow-lg hover:shadow-xl transition-all duration-300" onclick="toggleTheme()" aria-label="Toggle dark mode">
        <i id="theme-icon" class="fas fa-moon text-gray-700 dark:text-yellow-300"></i>
    </button>
    
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-white dark:bg-slate-900 z-50 flex items-center justify-center transition-opacity duration-500">
        <div class="text-center">
            <div class="w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"></div>
            <p class="mt-4 text-slate-600 dark:text-slate-400">Cargando...</p>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="min-h-screen">
        {% block content %}
        {% endblock %}
    </div>
    
    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="{% static 'js/main.js' %}"></script>
    
    <script>
        // Initialize AOS (Animate On Scroll)
        document.addEventListener('DOMContentLoaded', function() {
            AOS.init({
                duration: 600,
                once: true,
                offset: 100
            });
            
            // Hide loading overlay when everything is loaded
            window.addEventListener('load', function() {
                const overlay = document.getElementById('loading-overlay');
                if (overlay) {
                    overlay.style.opacity = '0';
                    setTimeout(() => {
                        overlay.style.display = 'none';
                    }, 500);
                }
            });
            
            // Fallback in case load event doesn't fire
            setTimeout(function() {
                const overlay = document.getElementById('loading-overlay');
                if (overlay && overlay.style.display !== 'none') {
                    overlay.style.opacity = '0';
                    setTimeout(() => {
                        overlay.style.display = 'none';
                    }, 500);
                }
            }, 3000);
        });
        
        // Theme toggle function
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            // Update the theme
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Update the button icon
            const themeIcon = document.getElementById('theme-icon');
            if (themeIcon) {
                themeIcon.className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            }
            
            // Dispatch event for other components to react to theme changes
            document.dispatchEvent(new CustomEvent('themeChanged', { detail: { theme: newTheme } }));
        }
        
        // Initialize theme from localStorage or system preference
        function initializeTheme() {
            const savedTheme = localStorage.getItem('theme') || 
                            (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            
            document.documentElement.setAttribute('data-theme', savedTheme);
            
            // Update the theme toggle button icon
            const themeIcon = document.getElementById('theme-icon');
            if (themeIcon) {
                themeIcon.className = savedTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            }
        }
        
        // Initialize theme when the page loads
        initializeTheme();
    </script>
    
    {% block extra_js %}{% endblock %}
    
    <!-- AI Engine Script -->
    <script src="{% static 'js/ai-engine.js' %}" defer></script>
    
    <!-- AOS Animation -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS after page load
        document.addEventListener('DOMContentLoaded', function() {
            AOS.init({
                duration: 800,
                easing: 'ease-out-cubic',
                once: true,
                mirror: false
            });
        });
    </script>
</body>
</html>